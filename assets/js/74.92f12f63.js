(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{275:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),a("ul",[t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),a("li",[t._m(9),t._v(" "),a("ol",[t._m(10),t._v(" "),a("li",[a("strong",[t._v("小程序")]),t._v(": "),a("code",[t._v('<text wx:for="'+t._s(t.items)+'">'+t._s(t.item)+"</text>")])])])]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15)]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._m(45),t._v(" "),t._m(46),t._v(" "),a("p",[t._v("以上两种方案优点仅仅是简单，但是每个需要处理的页面都要单独写一串重复的代码，哪怕利用 mixin 也要多不少冗余代码。利用指令的方式仅仅需要在合适的地方加上个一条 v-xxxx，其他都在指令的逻辑内统一处理。")]),t._v(" "),t._m(47),a("p",[t._v("这样就实现了只要在按钮上加上了 v-clickForbidden。按钮点击后就会被禁用，仅当某个请求返回数据或者 3s 后将按钮的禁用解除")]),t._v(" "),t._m(48),t._v(" "),a("p",[t._v("实现一个页面操作不会整页刷新的网站，并且能在浏览器的前进，后退时正确响应。给出你的技术实现方案？")]),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._v(" "),t._m(59),t._v(" "),t._m(60),t._v(" "),t._m(61),t._v(" "),t._m(62),t._v(" "),a("p",[t._v("利用 CSS 中新增的-webkit-mask-image 属性")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1-jsbridge-通信？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-jsbridge-通信？","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. JSBridge 通信？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("主要是给 "),a("code",[t._v("JavaScript")]),t._v(" 提供调用 "),a("code",[t._v("Native 功能")]),t._v("的接口，让混合开发中的前端部分可以方便地使用 "),a("code",[t._v("Native")]),t._v(" 的功能（例如："),a("code",[t._v("地址位置")]),t._v("、"),a("code",[t._v("摄像头")]),t._v("）。是 "),a("code",[t._v("Native")]),t._v(" 和 "),a("code",[t._v("非 Native")]),t._v(" 之间的桥梁，它的核心是构建 "),a("code",[t._v("Native")]),t._v(" 和 "),a("code",[t._v("非 Native")]),t._v(" 间 "),a("strong",[t._v("消息通信的通道")]),t._v(" ，而且这个通信的通道是"),a("strong",[t._v("双向的")]),t._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[a("code",[t._v("JSBridge")]),t._v(" 的通信原理")]),t._v(" "),a("ol",[a("li",[a("p",[a("code",[t._v("JavaScript")]),t._v(" 调用 "),a("code",[t._v("Native")]),t._v(" 的方式: 主要有"),a("strong",[t._v("两种")]),t._v("："),a("code",[t._v("注入API")]),t._v(" 和 "),a("code",[t._v("拦截URL SCHEME")])]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("注入 API")]),t._v(" 方式的主要原理是，通过 "),a("code",[t._v("WebView")]),t._v(" 提供的接口，向 "),a("code",[t._v("JavaScript")]),t._v(" 的 "),a("code",[t._v("Context（window）")]),t._v("中注入对象或者方法，让 "),a("code",[t._v("JavaScript")]),t._v(" 调用时，直接执行相应的 "),a("code",[t._v("Native 代码")]),t._v(" 逻辑，达到 "),a("code",[t._v("JavaScript")]),t._v(" 调用 "),a("code",[t._v("Native")]),t._v(" 的目的")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("拦截 URL SCHEME")]),t._v(" 的主要流程是："),a("code",[t._v("Web 端")]),t._v(" 通过某种方式（例如 "),a("code",[t._v("iframe.src")]),t._v("）发送 "),a("code",[t._v("URL Scheme")]),t._v(" 请求，之后 "),a("code",[t._v("Native")]),t._v(" 拦截到请求并根据 "),a("code",[t._v("URL SCHEME")]),t._v("（包括所带的参数）进行相关操作")]),t._v(" "),a("p",[t._v("在时间过程中，这种方式有一定的"),a("strong",[t._v("缺陷")]),t._v("：")]),t._v(" "),a("ol",[a("li",[t._v("使用 "),a("code",[t._v("iframe.src")]),t._v(" 发送 "),a("code",[t._v("URL SCHEME")]),t._v(" 会有 "),a("code",[t._v("url 长度")]),t._v("的隐患。")]),t._v(" "),a("li",[t._v("创建请求，需要一定的耗时，比注入 API 的方式调用同样的功能，耗时会较长")])])])]),t._v(" "),a("p",[a("strong",[t._v("因此")]),t._v("："),a("code",[t._v("JavaScript")]),t._v(" 调用 "),a("code",[t._v("Native")]),t._v(" 推荐使用: "),a("strong",[t._v("注入 API")]),t._v(" 的方式")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("Native")]),t._v(" 调用 "),a("code",[t._v("JavaScript")]),t._v(" 的方式")]),t._v(" "),a("p",[t._v("相比于 "),a("code",[t._v("JavaScript")]),t._v(" 调用 "),a("code",[t._v("Native")]),t._v("， "),a("code",[t._v("Native")]),t._v(" 调用 JavaScript"),a("code",[t._v("较为简单，直接执行拼接好的")]),t._v("JavaScript 代码"),a("code",[t._v("即可。从外部调用")]),t._v("JavaScript"),a("code",[t._v("中的方法，因此")]),t._v("JavaScript"),a("code",[t._v("的方法必须在全局的")]),t._v("window` 上。")])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("扩展")]),this._v("："),s("code",[this._v("RN")]),this._v(" 与 "),s("code",[this._v("webView")]),this._v(" 的通信")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[a("code",[t._v("webview")]),t._v(" 中点击事件代码")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("postMessage()")]),t._v("方法，传递 "),a("code",[t._v("两个参数")]),t._v("。一个是 "),a("code",[t._v("type 值")]),t._v("，是我们做判断时候用的。判断是哪种类型的消息。另一个是我们想传递的 "),a("code",[t._v("其他参数")]),t._v("。这里记得参数传递前做一次："),a("code",[t._v("JSON.stringify()")]),t._v("方法，解析 "),a("code",[t._v("json 字符串")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("RN")]),t._v(" 中获取传过来的参数\n"),a("code",[t._v("Webview")]),t._v(" 组件的 "),a("code",[t._v("onMessage")]),t._v(" 方法中接受："),a("code",[t._v("JSON.parse(event.nativeEvent.data)")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_2-小程序-与-vue-有什么区别？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-小程序-与-vue-有什么区别？","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 小程序 与 Vue 有什么区别？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("p",[a("strong",[t._v("生命周期")]),t._v("：相比之下，小程序的钩子函数要简单得多。vue 的钩子函数在跳转新页面时，钩子函数都会触发，但是小程序的钩子函数，页面不同的跳转方式，触发的钩子并不一样")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("onLoad")]),t._v("："),a("code",[t._v("页面加载")]),t._v(": 一个页面只会调用一次，可以在 "),a("code",[t._v("onLoad")]),t._v(" 中获取打开当前页面所调用的 "),a("code",[t._v("query")]),t._v(" 参数")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("onShow")]),t._v(": "),a("code",[t._v("页面显示")]),t._v(": 每次打开页面都会调用一次")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("onReady")]),t._v(": "),a("code",[t._v("页面初次渲染完成")]),t._v(": 一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互。对界面的设置如 "),a("code",[t._v("wx.setNavigationBarTitle")]),t._v(" 请在 "),a("code",[t._v("onReady")]),t._v(" 之后设置")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("onHide")]),t._v(": "),a("code",[t._v("页面隐藏")]),t._v(": 当 "),a("code",[t._v("navigateTo")]),t._v(" 或底部 "),a("code",[t._v("tab")]),t._v(" 切换时调用")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("onUnload")]),t._v(": "),a("code",[t._v("页面卸载")]),t._v(": 当 "),a("code",[t._v("redirectTo")]),t._v(" 或 "),a("code",[t._v("navigateBack")]),t._v(" 的时候调用")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("p",[a("strong",[t._v("数据请求")])]),t._v(" "),a("p",[t._v("在页面加载请求数据时，两者钩子的使用有些类似，"),a("code",[t._v("vue")]),t._v(" 一般会在 "),a("code",[t._v("created")]),t._v(" 或者 "),a("code",[t._v("mounted")]),t._v(" 中请求数据。而在小程序，会在 "),a("code",[t._v("onLoad")]),t._v(" 或者 "),a("code",[t._v("onShow")]),t._v(" 中请求数据")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("p",[a("strong",[t._v("数据绑定")])]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("Vue")]),t._v(": "),a("code",[t._v("vue")]),t._v(" 动态绑定一个变量的值为元素的某个属性的时候，会在变量前面加上冒号"),a("code",[t._v("：")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("imgSrc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("小程序")]),t._v(": 绑定某个变量的值为元素属性时，会用 "),a("code",[t._v("两个大括号")]),t._v(" 括起来，如果不加括号，为被认为是 "),a("code",[t._v("字符串")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("image")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{imgSrc}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("列表渲染")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("strong",[this._v("Vue")]),this._v(": "),s("code",[this._v('<li v-for="item in items"></li>')])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("p",[a("strong",[t._v("显示与隐藏元素")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("Vue")]),t._v(": 使用 "),a("code",[t._v("v-if")]),t._v(" 和 "),a("code",[t._v("v-show")]),t._v(" 控制元素的显示和隐藏")]),t._v(" "),a("li",[a("strong",[t._v("小程序")]),t._v(": 使用 "),a("code",[t._v("wx-if")]),t._v(" 和 "),a("code",[t._v("hidden")]),t._v(" 控制元素的显示和隐藏")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("p",[a("strong",[t._v("事件处理")])]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("Vue")]),t._v(": 使用 "),a("code",[t._v("v-on:event")]),t._v(" 绑定事件，或者使用"),a("code",[t._v("@event")]),t._v(" 绑定事件")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("v-on:")]),t._v("click")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("counter += 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Add 1"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("counter += 1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Add 1"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("小程序")]),t._v(": 全用 "),a("code",[t._v("bindtap(bind+event)")]),t._v("，或者 "),a("code",[t._v("catchtap(catch+event)")]),t._v(" 绑定事件")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("noWork"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("明天不上班"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("catchtap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("noWork"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("明天不上班"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("p",[a("strong",[t._v("数据双向绑定")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("Vue")]),t._v(": 表单元素上加 "),a("code",[t._v("v-model")])]),t._v(" "),a("li",[a("strong",[t._v("小程序")]),t._v(": 通过监听输入框事件 "),a("code",[t._v("bindinput")]),t._v(",调用 "),a("code",[t._v("setData({})")]),t._v("方法进行模拟")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("p",[a("strong",[t._v("取值")])]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("Vue")]),t._v(": 通过 "),a("code",[t._v("this.xxx")]),t._v(" 取值")]),t._v(" "),a("li",[a("strong",[t._v("小程序")]),t._v(": 通过 "),a("code",[t._v("this.data.xxx")]),t._v(" 取值")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("li",[a("p",[a("strong",[t._v("绑定事件传参")])]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("Vue")]),t._v(": 绑定事件传参挺简单，只需要在触发事件的方法中，把需要传递的数据作为形参传入就可以了")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("say('明天不上班')"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("小程序")]),t._v(": 不能直接在绑定事件的方法中传入参数，需要将参数作为属性值，绑定到元素上的 "),a("code",[t._v("data-属性")]),t._v(" 上，然后在方法中，通过 "),a("code",[t._v("e.currentTarget.dataset.*")]),t._v(" 的方式获取")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("tr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("bindtap")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("toApprove"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{item.id}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\ntoApprove(e) { let id = e.currentTarget.dataset.id; }\n")])])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("小程序实现原理解析")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[a("strong",[t._v("小程序目录结构")])]),t._v(" "),a("ul",[a("li",[t._v("一个完整的小程序主要由以下几部分组成：\n"),a("ol",[a("li",[t._v("一个入口文件："),a("code",[t._v("app.js")])]),t._v(" "),a("li",[t._v("一个全局样式："),a("code",[t._v("app.wxss")])]),t._v(" "),a("li",[t._v("一个全局配置："),a("code",[t._v("app.json")])])])])]),t._v(" "),a("p",[t._v("页面："),a("code",[t._v("pages")]),t._v(" 下，每个页面再按文件夹划分，每个页面 4 个文件")]),t._v(" "),a("ol",[a("li",[t._v("视图："),a("code",[t._v("wxml")]),t._v(", "),a("code",[t._v("wxss")])]),t._v(" "),a("li",[t._v("逻辑："),a("code",[t._v("js")]),t._v(", "),a("code",[t._v("json")]),t._v(" (页面配置, 不是必须)")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("小程序架构")])]),t._v(" "),a("p",[t._v("微信小程序的框架包含两部分："),a("code",[t._v("View视图层")]),t._v("、"),a("code",[t._v("App Service逻辑层")]),t._v(". "),a("code",[t._v("View 层")]),t._v(" 用来渲染页面结构，"),a("code",[t._v("AppService 层")]),t._v(" 用来 "),a("code",[t._v("逻辑处理")]),t._v("、"),a("code",[t._v("数据请求")]),t._v("、"),a("code",[t._v("接口调用")]),t._v("，它们在两个进程（两个 "),a("code",[t._v("Webview")]),t._v("）里运行")]),t._v(" "),a("p",[a("code",[t._v("视图层")]),t._v(" 和 "),a("code",[t._v("逻辑层")]),t._v(" 通过系统层的 "),a("strong",[t._v("JSBridge")]),t._v(" 进行通信，"),a("code",[t._v("逻辑层")]),t._v(" 把数据变化通知到 "),a("code",[t._v("视图层")]),t._v("，触发视图层页面更新，视图层把触发的事件通知到 "),a("code",[t._v("逻辑层")]),t._v(" 进行业务处理\n"),a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcwMzI2MjE1NzI0ODkx?x-oss-process=image/format,png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("扩展")]),t._v("：小程序不允许打开超过 5 个层级的页面？")]),t._v(" "),a("p",[t._v("小程序的视图和逻辑处理是用多个 "),a("code",[t._v("webview")]),t._v(" 实现的，逻辑处理的 "),a("code",[t._v("JS 代码")]),t._v("全部加载到一个 "),a("code",[t._v("Webview")]),t._v(" 里面，称之为 "),a("code",[t._v("AppService")]),t._v("，整个小程序只有一个，并且整个生命周期常驻内存。而所有的视图（"),a("code",[t._v("wxml")]),t._v(" 和 "),a("code",[t._v("wxss")]),t._v("）都是单独的 "),a("code",[t._v("Webview")]),t._v(" 来承载，称之为 "),a("code",[t._v("AppView")]),t._v("。所以一个小程序打开"),a("strong",[t._v("至少就会有 2 个 webview 进程")]),t._v("，正式因为每个视图都是一个独立的 "),a("code",[t._v("webview")]),t._v(" 进程，考虑到性能消耗")]),t._v(" "),a("p",[a("strong",[t._v("原理上")]),t._v("，"),a("code",[t._v("微信 App")]),t._v(" 里包含 "),a("code",[t._v("javascript 运行引擎")]),t._v("、"),a("code",[t._v("WXML/WXSS 处理引擎")]),t._v("，最终会把界面翻译成系统原生的界面，并展示出来。这样做的目的是为了提供和原生 App 性能相当的用户体验。")]),t._v(" "),a("ul",[a("li",[t._v("在 "),a("code",[t._v("ios")]),t._v(" 中，小程序的 "),a("code",[t._v("javascript")]),t._v(" 运行在 "),a("code",[t._v("javascriptCore")]),t._v(" 中")]),t._v(" "),a("li",[t._v("在 "),a("code",[t._v("Android")]),t._v(" 中,小程序的 "),a("code",[t._v("javascript")]),t._v(" 是通过 "),a("code",[t._v("X5 内核")]),t._v(" 来解析的")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("小程序的优劣势")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("strong",[t._v("优势")]),t._v("：\n"),a("ol",[a("li",[t._v("无需下载，通过搜索和扫一扫就可以打开")]),t._v(" "),a("li",[t._v("良好的用户体验：打开速度快")]),t._v(" "),a("li",[t._v("开发成本要比 App 要低")]),t._v(" "),a("li",[t._v("安卓上可以添加到桌面，与原生 App 差不多")]),t._v(" "),a("li",[t._v("为用户提供良好的安全保障。小程序的发布，微信拥有一套严格的审查流程， 不能通过审查的小程序是无法发布到线上的")])])]),t._v(" "),a("li",[t._v("劣势：\n"),a("ol",[a("li",[a("strong",[t._v("限制较多")]),t._v(": 页面大小不能超过 "),a("code",[t._v("1M")]),t._v("。不能打开超过 "),a("code",[t._v("5 个层级")]),t._v(" 的页面")]),t._v(" "),a("li",[a("strong",[t._v("样式单一")]),t._v(": 小程序的部分组件已经是成型的了，样式不可以修改。例如：幻灯片、导航")]),t._v(" "),a("li",[a("strong",[t._v("推广面窄")]),t._v(": 不能分享朋友圈，只能通过分享给朋友，附近小程序推广。其中附近小程序也受到微信的限制")]),t._v(" "),a("li",[a("strong",[t._v("依托于微信")]),t._v(": 无法开发后台管理功能")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"提高微信小程序的应用速度的手段有哪些？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#提高微信小程序的应用速度的手段有哪些？","aria-hidden":"true"}},[this._v("#")]),this._v(" 提高微信小程序的应用速度的手段有哪些？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("小程序首次启动前，"),s("code",[this._v("微信会在小程序启动前为小程序准备好通用的运行环境")]),this._v("，如运行中的线程和一些基础库的初始化。然后才开始进入启动状态，展示一个固定的启动界面，界面内包含小程序的图标、名称和加载提示图标。此时，微信会在背后完成几项工作：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[a("code",[t._v("下载")]),t._v(" 小程序代码包")]),t._v(" "),a("li",[a("code",[t._v("加载")]),t._v(" 小程序代码包")]),t._v(" "),a("li",[a("code",[t._v("初始化")]),t._v(" 小程序首页")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("注意")]),this._v("：下载到的小程序代码包不是"),s("code",[this._v("小程序的源代码")]),this._v("，而是"),s("code",[this._v("编译、压缩、打包")]),this._v("之后的代码包")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://img-blog.csdnimg.cn/img_convert/f2d05af7f83f5cd6b9e9bbc66e459e8d.png",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("围绕上图小程序的启动流程， 提高速度我们可以从"),s("code",[this._v("加载")]),this._v("、"),s("code",[this._v("渲染")]),this._v("两个纬度进行切入：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("小程序启动加载性能：\n"),a("ol",[a("li",[t._v("控制代码包的大小")]),t._v(" "),a("li",[t._v("分包加载")]),t._v(" "),a("li",[t._v("首屏体验（预请求，利用缓存，避免白屏）")])])]),t._v(" "),a("li",[t._v("小程序渲染性能\n"),a("ol",[a("li",[t._v("不要过于频繁调用 "),a("code",[t._v("setData")]),t._v("，应考虑将多次 "),a("code",[t._v("setData")]),t._v(" 合并成一次 "),a("code",[t._v("setData")]),t._v(" 调用")]),t._v(" "),a("li",[t._v("与界面渲染无关的数据最好不要设置在 "),a("code",[t._v("data")]),t._v(" 中")]),t._v(" "),a("li",[t._v("自定义组件（各个组件也将具有各自独立的逻辑空间。分别拥有自己的独立的数据、"),a("code",[t._v("setData")]),t._v(" 调用）")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_3-团队的开发流程？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-团队的开发流程？","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 团队的开发流程？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_4-如何防止首页白屏？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-如何防止首页白屏？","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. 如何防止首页白屏？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("首屏时间")]),this._v("（"),s("code",[this._v("First Contentful Paint")]),this._v("），指的是浏览器从响应用户输入网址地址，到首屏内容渲染完成的时间，此时整个网页不一定要全部渲染完成，但需要展示当前视窗需要的内容")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X2pwZy9nSDMxdUY5VklpYlNUZ0szaWNjaWJBVnBPMjJpY1BrRmtXRmljaG1waWNBSUY4akx6RU8yNnFMZ1cwUTM0TEpNZHFrTVZmSnFEenh2MXI2dVd2QzdkRTJpYk5DcUEvNjQw?x-oss-process=image/format,png",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("通过 "),s("code",[this._v("DOMContentLoad")]),this._v(" 或者 "),s("code",[this._v("performance")]),this._v(" 来计算出首屏时间?")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方案一：")]),t._v("\ndocument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DOMContentLoaded'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'first contentful painting'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方案二：")]),t._v("\nperformance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getEntriesByName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"first-contentful-paint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("startTime\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// performance.getEntriesByName("first-contentful-paint")[0]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 会返回一个 PerformancePaintTiming的实例，结构如下：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"first-contentful-paint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  entryType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"paint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  startTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("507.80000002123415")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  duration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("先说下 "),a("code",[t._v("Spa 单页面")]),t._v(" 的加载过程: 首先就是 "),a("code",[t._v("html")]),t._v(",也就是 "),a("code",[t._v("FP 阶段")]),t._v("; 然后是静态资源 "),a("code",[t._v("css")]),t._v("，"),a("code",[t._v("js")]),t._v("，之后"),a("code",[t._v("解析 js")]),t._v("，生成 "),a("code",[t._v("HTML")]),t._v(",也就是 "),a("code",[t._v("FCP 阶段")]),t._v("，"),a("code",[t._v("css")]),t._v(", "),a("code",[t._v("js")]),t._v(" 资源加载下来了，首次的内容绘制，有一个大结构了; 到最后,就是 "),a("code",[t._v("FMP")]),t._v(",ajax 请求数据之后,首次有效绘制,就是页面加载差不多了，但是可能图片还没加载出来")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("strong",[t._v("总结")]),t._v(": 从 "),a("code",[t._v("FP")]),t._v(" 到 "),a("code",[t._v("FMP")]),t._v(" 这个过程全是 "),a("strong",[t._v("白屏")]),t._v("，可能你的 "),a("code",[t._v("header")]),t._v(" 如果有啥大背景色啊，这个背景色或许会出来,"),a("code",[t._v("ajax")]),t._v(" 之后，才会真正去解析我们的数据,把数据放入我们的 "),a("code",[t._v("html")]),t._v(" 标签中\n"),a("img",{attrs:{src:"https://img-blog.csdnimg.cn/20201020201657375.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTM4OTA1MQ==,size_16,color_FFFFFF,t_70#pic_center",alt:""}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("加载慢的原因")]),t._v(" "),a("p",[t._v("在页面渲染的过程，导致加载速度慢的因素可能如下：")]),t._v(" "),a("ol",[a("li",[t._v("网络延时问题")]),t._v(" "),a("li",[t._v("资源文件体积是否过大")]),t._v(" "),a("li",[t._v("资源是否重复发送请求去加载了")]),t._v(" "),a("li",[t._v("加载脚本的时候，渲染内容堵塞了")])])]),t._v(" "),a("li",[a("p",[t._v("解决方案:")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("减少入口文件体积")])]),t._v(" "),a("p",[t._v("常用的手段是 "),a("code",[t._v("路由懒加载")]),t._v("，把不同路由对应的组件分割成不同的代码块，待路由被请求的时候会单独打包路由，使得入口文件变小，加载速度大大增加")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("vue-router")]),t._v(" 配置路由的时候，采用动态加载路由的形式:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n   path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./components/Test.vue'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("静态资源本地缓存")])]),t._v(" "),a("p",[t._v("后端返回资源问题：")]),t._v(" "),a("ul",[a("li",[t._v("采用 "),a("code",[t._v("HTTP 缓存")]),t._v("，设置 "),a("code",[t._v("Cache-Control")]),t._v("，"),a("code",[t._v("Last-Modified")]),t._v("，"),a("code",[t._v("Etag")]),t._v(" 等响应头")]),t._v(" "),a("li",[t._v("采用 "),a("code",[t._v("Service Worker")]),t._v(" 离线缓存")])]),t._v(" "),a("p",[t._v("前端合理利用 "),a("code",[t._v("localStorage")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("UI 框架按需加载")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("图片资源的压缩")])]),t._v(" "),a("p",[t._v("对大图片进行压缩、对 "),a("code",[t._v("icon 图")]),t._v("可以使用在线字体图标或者雪碧图，将众多小图标合并到同一张图上，用以减轻 "),a("code",[t._v("http")]),t._v(" 请求压力。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("组件重复打包")])]),t._v(" "),a("p",[t._v("如果一个依赖库被多个文件引入会多次打包。"),a("strong",[t._v("解决方案")]),t._v("：在 "),a("code",[t._v("webpack")]),t._v(" 的 "),a("code",[t._v("config")]),t._v(" 文件中，修改 "),a("code",[t._v("CommonsChunkPlugin")]),t._v(" 的配置。"),a("code",[t._v("minChunks")]),t._v(" 为 3 表示会把使用 3 次及以上的包抽离出来，放进公共依赖文件，避免了重复加载组件")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("开启 GZip 压缩")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CompressionPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/\\.js$|\\.html$|\\.css/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 匹配文件名")]),t._v("\n    threshold"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10240")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对超过10k的数据进行压缩")]),t._v("\n    deleteOriginalAssets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否删除原文件")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("使用 SSR")])]),t._v(" "),a("p",[a("code",[t._v("SSR（Server side ）")]),t._v("，也就是 "),a("code",[t._v("服务端渲染")]),t._v("，组件或页面通过服务器生成 "),a("code",[t._v("html 字符串")]),t._v("，再发送到浏览器")]),t._v(" "),a("blockquote",[a("p",[t._v("vue -> Nuxt.js, react -> Next.js")])])])])]),t._v(" "),a("li",[a("p",[t._v("减少首屏渲染时间的方法有很多，总的来讲可以分成两大部分 ："),a("code",[t._v("资源加载优化")]),t._v(" 和 "),a("code",[t._v("页面渲染优化")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9nSDMxdUY5VklpYlNUZ0szaWNjaWJBVnBPMjJpY1BrRmtXRmljTEVZQW5GNHJCVjZiaFdUS0hLUGliMEs1cEhBRDhEZFZYNDRQRUtFaGtPeDBDRFlacmlhd2tIRmcvNjQw?x-oss-process=image/format,png",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("解决办法：")]),t._v(" "),a("ol",[a("li",[a("p",[a("code",[t._v("预渲染")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("SSR")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("路由懒加载")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("使用 Gzip 压缩")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("webpack entry")]),t._v(" 多页应用")])]),t._v(" "),a("li",[a("p",[t._v("骨架屏（原理）")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("loading")])]),t._v(" "),a("p",[t._v("在首页 "),a("code",[t._v("index.html")]),t._v(" 里加一个 "),a("code",[t._v("loading css")]),t._v(" 效果，当页面加载完成消失")])])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_5-怎么理解前端工程化、模块化、组件化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-怎么理解前端工程化、模块化、组件化","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. 怎么理解前端工程化、模块化、组件化?")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("strong",[t._v("工程化")]),t._v("：是一种思想而不是某种技术，而模块化和组件化是为工程化思想下相对较具体的开发方式。可以简单的认为模块化和组件化是工程化的表现形式")]),t._v(" "),a("li",[a("strong",[t._v("模块化开发")]),t._v("：一个模块就是一个实现特定功能的文件，有了模块我们就可以更方便的使用别人的代码，要用什么功能就加载什么模块\n"),a("ul",[a("li",[t._v("模块化开发的好处：\n"),a("ol",[a("li",[t._v("提高代码复用率和维护性")]),t._v(" "),a("li",[t._v("避免变量污染、命名冲突")])])])])]),t._v(" "),a("li",[a("strong",[t._v("组件化开发")]),t._v("：就是将一个页面拆分成很多的小组件")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_6-微前端中的渲染、js-沙箱、样式隔离、数据通信"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-微前端中的渲染、js-沙箱、样式隔离、数据通信","aria-hidden":"true"}},[this._v("#")]),this._v(" 6. 微前端中的渲染、JS 沙箱、样式隔离、数据通信?")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_7-如何实现扫码登录功能？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-如何实现扫码登录功能？","aria-hidden":"true"}},[this._v("#")]),this._v(" 7. 如何实现扫码登录功能？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("访问 PC 端二维码生成页面，PC 端请求服务端获取 "),a("code",[t._v("二维码ID")])]),t._v(" "),a("li",[t._v("服务端生成相应的"),a("code",[t._v("二维码ID")]),t._v("，设置二维码的过期时间，状态等。")]),t._v(" "),a("li",[t._v("PC 获取"),a("code",[t._v("二维码ID")]),t._v("，生成相应的二维码。")]),t._v(" "),a("li",[t._v("手机端扫描二维码，获取"),a("code",[t._v("二维码ID")]),t._v("。")]),t._v(" "),a("li",[t._v("手机端将"),a("code",[t._v("手机端token")]),t._v("和"),a("code",[t._v("二维码ID")]),t._v("发送给服务端，确认登录。")]),t._v(" "),a("li",[t._v("服务端校验"),a("code",[t._v("手机端token")]),t._v("，根据"),a("code",[t._v("手机端token")]),t._v("和"),a("code",[t._v("二维码ID")]),t._v("生成 PC 端"),a("code",[t._v("token")])]),t._v(" "),a("li",[t._v("PC 端通过"),a("code",[t._v("轮询方式")]),t._v("请求服务端，通过二维码 ID 获取二维码状态，如果已成功，返回 PC token，登录成功。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("扩展")]),this._v("：轮询方式有哪些，以及它们各自的优缺点？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[a("strong",[t._v("轮询")])]),t._v(" "),a("p",[a("code",[t._v("基本思路")]),t._v(": 就是浏览器每隔一段时间向浏览器发送 "),a("code",[t._v("http 请求")]),t._v("，服务器端在收到请求后，不论是否有数据更新，都直接进行响应。这种方式实现的即时通信，本质上还是浏览器发送请求，服务器接受请求的一个过程，通过让客户端不断的进行请求，使得客户端能够模拟实时地收到服务器端的数据的变化。")]),t._v(" "),a("p",[a("strong",[t._v("优点")]),t._v(": 是比较简单，易于理解，实现起来也没有什么技术难点。")]),t._v(" "),a("p",[a("strong",[t._v("缺点")]),t._v(": 由于需要不断的建立 http 连接，严重浪费了服务器端和客户端的资源. 人数越多，服务器端压力越大，这是很不合理的。")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("长轮询")])]),t._v(" "),a("p",[a("code",[t._v("基本思路")]),t._v(": 服务器收到客户端发来的请求后,服务器端不会直接进行响应，而是先将这个请求挂起，然后判断服务器端数据是否有更新。如果有更新，则进行响应，如果一直没有数据，则到达一定的时间限制(服务器端设置)才返回。客户端 "),a("code",[t._v("JavaScript 响应")]),t._v("处理函数会在处理完服务器返回的信息后，再次发出请求，重新建立连接。")]),t._v(" "),a("p",[a("strong",[t._v("优点")]),t._v(": 减少了很多不必要的 http 请求次数，相比之下节约了资源")]),t._v(" "),a("p",[a("strong",[t._v("缺点")]),t._v(": 接挂起也会导致资源的浪费")]),t._v(" "),a("p",[a("strong",[t._v("轮询与长轮询都是基于 HTTP 的")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("长连接")]),t._v("（SSE）\n"),a("code",[t._v("SSE")]),t._v(" 是 "),a("code",[t._v("HTML5")]),t._v(" 新增的功能，全称为 "),a("code",[t._v("Server-Sent Events")]),t._v("。它可以允许服务推送数据到客户端。"),a("code",[t._v("SSE")]),t._v(" 在本质上就与之前的长轮询、短轮询不同，虽然都是基于 "),a("code",[t._v("http 协议")]),t._v("的，但是轮询需要客户端先发送请求。而 "),a("code",[t._v("SSE")]),t._v(" 最大的特点就是不需要客户端发送请求，可以实现只要服务器端数据有更新，就可以马上发送到客户端。")]),t._v(" "),a("p",[a("strong",[t._v("优点")]),t._v(": 它不需要建立或保持大量的客户端发往服务器端的请求，节约了很多资源，提升应用性能")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("WebSocket")])]),t._v(" "),a("p",[a("code",[t._v("WebSocket")]),t._v(" 是 "),a("code",[t._v("Html5")]),t._v(" 定义的一个新协议，与传统的 "),a("code",[t._v("http 协议")]),t._v("不同，该协议可以实现服务器与客户端之间"),a("code",[t._v("全双工通信")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_8-如何防止重复发送请求？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-如何防止重复发送请求？","aria-hidden":"true"}},[this._v("#")]),this._v(" 8. 如何防止重复发送请求？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" count "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("promiseFunction")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("rs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" firstFn "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("firstPromise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("promiseFunction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("firstFn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("firstFn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("firstFn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("firstPromise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("promiseFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求的实例，已存在意味着正在请求中，直接返回实例，不触发新的请求")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" p\n      "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" p\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 否则发送请求，且在finally时将p置空，那么下一次请求可以重新发起")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("promiseFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("finally")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("扩展")]),this._v("：前端做后台管控系统，在某些接口请求时间过长的场景下，需要防止用户反复发起请求，实现方式也有好几种：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("在按钮点击发起请求后，弹个蒙层，显示个 loading，等请求数据返回了将蒙层隐藏掉")]),this._v(" "),s("li",[this._v("在按钮点击发起请求后，将按钮禁用掉，同样等数据返回了将按钮禁用解除")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" forbidClick "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" el "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("forbidClick")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'is-disabled'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("done"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clearInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("disabled "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n          el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'is-disabled'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    el"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forbidClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unbind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'click'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" forbidClick"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 再考虑请求，记录当前请求是否完成。请求拦截器中，接口请求时长超过3s，则视为完成，不管请求结果成功或失败")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_9-实现一个页面操作不会整页刷新的网站"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-实现一个页面操作不会整页刷新的网站","aria-hidden":"true"}},[this._v("#")]),this._v(" 9. 实现一个页面操作不会整页刷新的网站")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("p",[t._v("方式一\n用 cookie 或者 localStorage 来记录应用的状态即可，刷新页面时读取一下这个状态，然后发送相应 ajax 请求来改变页面即可（"),a("strong",[t._v("注意")]),t._v("：ajax 可以无刷新改变页面内容，但无法改变页面 URL；ajax 的使用对搜索引擎很不友好）")])]),t._v(" "),a("li",[a("p",[t._v("方式二\nHTML5 里引用了新的 API，就是 history.pushState 和 history.replaceState，就是通过这个接口做到无刷新改变页面 URL 的")]),t._v(" "),a("p",[t._v("通过 pushState 和 replaceState 接口操作浏览器历史，并且改变当前页面的 URL。pushState 是将指定的 URL 添加到浏览器历史里，replaceState 是将指定的 URL 替换当前的 URL。（"),a("strong",[t._v("注意")]),t._v("：通过 onpopstate 事件来响应浏览器的前进和后退的操作）")])]),t._v(" "),a("li",[a("p",[t._v("方式三\n内容发生改变后，改变 URL 的 hash。（"),a("strong",[t._v("注意")]),t._v("：hash 的方式不能很好的处理浏览器的前进、后退等问题，通过 onhashchange 事件监听 hash 的改变）")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("总结")]),this._v("：结合 ajax 和 pushState 完美的进行无刷新浏览了")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("扩展")]),this._v("：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[a("p",[t._v("window.history.back() -- 相当于用户在浏览器的工具栏上点击返回按钮")])]),t._v(" "),a("li",[a("p",[t._v("window.history.forward() -- 相当于用户在浏览器的工具栏上点击前进按钮")])]),t._v(" "),a("li",[a("p",[t._v("go()方法，指定一个相对于当前页面位置的数值，从当前会话的历史记录中加载页面（当前位置页面索引：0，上一页：-1，下一页：1）\nwindow.history.go(-2)--后退 2 页，相当于调用两次 back();")]),t._v(" "),a("p",[t._v("window.history.go(1)--前进 1 页，相当于调用 forward();")])]),t._v(" "),a("li",[a("p",[t._v("通过 window.history.length，得到历史记录栈中一共有多少页")])]),t._v(" "),a("li",[a("p",[t._v("pushState(stateObject,title,URL)。state： 对象，存放一些数据表示当前状态。当浏览器执行前进后退操作时触发 onpopstate 事件")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onpopstate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前历史记录条目的状态")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'popstate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 做一些操作")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_10、如何优化单页面首屏加载白屏体验或加重速度慢问题-？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10、如何优化单页面首屏加载白屏体验或加重速度慢问题-？","aria-hidden":"true"}},[this._v("#")]),this._v(" 10、如何优化单页面首屏加载白屏体验或加重速度慢问题 ？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("将公用的 JS 库通过 script 标签外部引入，减小 app.bundle 的大小，让浏览器并行下载资源文件，提高下载速度")]),t._v(" "),a("li",[t._v("在配置 路由时，页面和组件使用懒加载的方式引入，进一步缩小 app.bundle 的体积，在调用某个组件时再加载对应的 js 文件")]),t._v(" "),a("li",[t._v("root 中插入 loading 或者 骨架屏 prerender-spa-plugin，提升用户体验（"),a("code",[t._v("saas项目中添加 loading 来防止白屏")]),t._v("）")]),t._v(" "),a("li",[t._v("如果在 webview 中的页面，可以进行页面预加载")]),t._v(" "),a("li",[t._v("独立打包异步组件公共 Bundle，以提高复用性&缓存命中率")]),t._v(" "),a("li",[t._v("静态文件本地缓存，有两种方式分别为 HTTP 缓存，设置 Cache-Control，Last-Modified，Etag 等响应头和 Service Worker 离线缓存")]),t._v(" "),a("li",[t._v("配合 PWA 使用")]),t._v(" "),a("li",[t._v("SSR")]),t._v(" "),a("li",[t._v("使用 Tree Shaking 减少业务代码体积")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("懒加载和预加载的区别？\n"),s("ol",[s("li",[this._v("预加载是指在页面加载完成之前，提前将所需资源下载，之后使用的时候从缓存中调用；懒加载是延迟加载，按照一定的条件或者需求等到满足条件的时候再加载对应的资源")]),this._v(" "),s("li",[this._v("预加载增加了服务器压力，换来的是用户体验的提升，典型例子是在一个图片较多的网页中，如果使用了预加载就可以避免网页加载出来是时，图片的位置一片空白（图片可能还没加载出来），造成不好的用户体验；懒加载的作用减少不要的请求，缓解了服务器压力")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_11-如何设计一个-vue-组件？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11-如何设计一个-vue-组件？","aria-hidden":"true"}},[this._v("#")]),this._v(" 11. 如何设计一个 Vue 组件？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_12-如何开发一个开源组件库？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12-如何开发一个开源组件库？","aria-hidden":"true"}},[this._v("#")]),this._v(" 12. 如何开发一个开源组件库？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_13-如何统一对错误进行捕获的？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13-如何统一对错误进行捕获的？","aria-hidden":"true"}},[this._v("#")]),this._v(" 13. 如何统一对错误进行捕获的？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_14-vue-的异步错误如何捕获？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_14-vue-的异步错误如何捕获？","aria-hidden":"true"}},[this._v("#")]),this._v(" 14. vue 的异步错误如何捕获？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_15-如如何用鉴权控制登陆时间设计保持七天登录状态？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15-如如何用鉴权控制登陆时间设计保持七天登录状态？","aria-hidden":"true"}},[this._v("#")]),this._v(" 15. 如如何用鉴权控制登陆时间设计保持七天登录状态？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_16-为什么-b-站的弹幕可以不挡人物"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_16-为什么-b-站的弹幕可以不挡人物","aria-hidden":"true"}},[this._v("#")]),this._v(" 16. 为什么 B 站的弹幕可以不挡人物?")])}],!1,null,null,null);s.default=e.exports}}]);