(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{192:function(e,t,n){"use strict";n.r(t);var a=n(0),r=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("p",[e._v("ä½œä¸ºå‰ç«¯é¢è¯•å®˜æˆ‘é¢è¯•å¿…é¡»é—®ä¸€ä¸‹é¢è¯•è€…ï¼šæè¿°ä¸€ä¸‹ä½ å¯¹MVVMçš„ç†è§£ï¼Ÿ")]),e._v(" "),n("p",[e._v("æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»é›¶å®ç°ä¸€å¥—å®Œæ•´çš„åŸºäºVueçš„MVVMï¼Œæä¾›ç»™æ¥å¹´â€œé‡‘ä¸‰é“¶å››â€è·³æ§½é«˜å³°æœŸçš„å°ä¼™ä¼´ä»¬é˜…è¯»ä¹Ÿè¯¦ç»†æ¢³ç†ä¸€ä¸‹è‡ªå·±å¯¹MVVMçš„ç†è§£ã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/7/25/164cde63a9070a28?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"å›¾ç‰‡alt",title:"MVVM"}})]),e._v(" "),n("h2",{attrs:{id:"mvvmæ˜¯ä»€ä¹ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mvvmæ˜¯ä»€ä¹ˆ","aria-hidden":"true"}},[e._v("#")]),e._v(" MVVMæ˜¯ä»€ä¹ˆ")]),e._v(" "),n("p",[e._v("åœ¨äº†è§£MVVMä¹‹å‰ï¼Œæˆ‘ä»¬æ¥å¯¹MVCè¯´æ˜ä¸€ä¸‹ã€‚MVCæ¶æ„èµ·åˆä»¥åŠç°åœ¨ä¸€ç›´å­˜åœ¨äºåç«¯ã€‚MVCåˆ†åˆ«ä»£è¡¨åå°çš„ä¸‰å±‚ï¼ŒMä»£è¡¨æ¨¡å‹å±‚ã€Vä»£è¡¨è§†å›¾å±‚ã€Cä»£è¡¨æ§åˆ¶å™¨å±‚ï¼Œè¿™ä¸‰å±‚æ¶æ„å®Œå…¨å¯ä»¥æ»¡è¶³äºç»å¤§åˆ†éƒ¨çš„ä¸šåŠ¡éœ€æ±‚å¼€å‘ã€‚\n"),n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2017/11/3/24c32d90d20161bd813bc80e73aaae29?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"å›¾ç‰‡alt",title:"MVCæ¨¡å¼"}})]),e._v(" "),n("blockquote",[n("p",[e._v("MVC & ä¸‰å±‚æ¶æ„")])]),e._v(" "),n("p",[e._v("ä¸‹é¢ä»¥Javaä¸ºä¾‹ï¼Œåˆ†åˆ«é˜è¿°ä¸‹MVCå’Œä¸‰å±‚æ¶æ„ä¸­å„å±‚ä»£è¡¨çš„å«ä¹‰ä»¥åŠèŒè´£ï¼š")]),e._v(" "),n("ol",[n("li",[e._v("Modelï¼šæ¨¡å‹å±‚ï¼Œä»£è¡¨ç€æ¯ä¸€ä¸ªJavaBeanã€‚å…¶åˆ†ä¸ºä¸¤ç±»ï¼Œä¸€ç±»ç§°ä¸ºæ•°æ®æ‰¿è½½Beanï¼Œä¸€ç±»ç§°ä¸ºä¸šåŠ¡å¤„ç†Beanã€‚")]),e._v(" "),n("li",[e._v("Viewï¼šè§†å›¾å±‚ï¼Œä»£è¡¨ç€å¯¹åº”çš„è§†å›¾é¡µé¢ï¼Œä¸ç”¨æˆ·ç›´æ¥è¿›è¡Œäº¤äº’ã€‚")]),e._v(" "),n("li",[e._v("Controllerï¼šæ§åˆ¶å±‚ï¼Œè¯¥å±‚æ˜¯Modelå’ŒViewçš„â€œä¸­é—´äººâ€ï¼Œç”¨äºå°†ç”¨æˆ·è¯·æ±‚è½¬å‘ç»™ç›¸åº”çš„Modelè¿›è¡Œå¤„ç†ï¼Œå¹¶å¤„ç†Modelçš„è®¡ç®—ç»“æœå‘ç”¨æˆ·æä¾›ç›¸åº”å“åº”ã€‚")])]),e._v(" "),n("p",[e._v("ä»¥ç™»å½•ä¸ºä¾‹ï¼Œä»‹ç»ä¸€ä¸‹ä¸‰å±‚ä¹‹é—´çš„é€»è¾‘å…³ç³»ã€‚å½“ç”¨æˆ·ç‚¹å‡»Viewè§†å›¾é¡µé¢çš„ç™»å½•æŒ‰é’®æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒå–Controlleræ§åˆ¶å±‚é‡Œçš„ç™»å½•æ¥å£ã€‚ä¸€èˆ¬åœ¨Controllerå±‚ä¸­ä¸ä¼šå†™å¾ˆå¤šå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œåªä¼šå†™ä¸€ä¸ªæ¥å£æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…·ä½“çš„é€»è¾‘åœ¨Serviceå±‚è¿›è¡Œå®ç°ï¼Œç„¶åserviceå±‚é‡Œçš„å…·ä½“é€»è¾‘å°±ä¼šè°ƒç”¨DAOå±‚é‡Œçš„Modelæ¨¡å‹ï¼Œä»è€Œè¾¾åˆ°åŠ¨æ€åŒ–çš„æ•ˆæœã€‚")]),e._v(" "),n("blockquote",[n("p",[e._v("MVVM çš„æè¿°")])]),e._v(" "),n("p",[e._v("MVVM è®¾è®¡æ¨¡å¼ï¼Œæ˜¯ç”± MVCï¼ˆæœ€æ—©æ¥æºäºåç«¯ï¼‰ã€MVP ç­‰è®¾è®¡æ¨¡å¼è¿›åŒ–è€Œæ¥ã€‚")]),e._v(" "),n("ol",[n("li",[e._v("M - æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ï¼Œç®€å•çš„JSå¯¹è±¡")]),e._v(" "),n("li",[e._v("VM - è§†å›¾æ¨¡å‹ï¼ˆViewModelï¼‰ï¼Œè¿æ¥Modelä¸View")]),e._v(" "),n("li",[e._v("V - è§†å›¾å±‚ï¼ˆViewï¼‰ï¼Œå‘ˆç°ç»™ç”¨æˆ·çš„DOMæ¸²æŸ“ç•Œé¢\n"),n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/5/7/16339e3e3f24873d?imageView2/0/w/1280/h/960/format/webp/ignore-error/1",alt:"å›¾ç‰‡alt",title:"MVVMæ¨¡å¼"}}),e._v("\né€šè¿‡ä»¥ä¸Šçš„MVVMæ¨¡å¼å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæœ€æ ¸å¿ƒçš„å°±æ˜¯ViewModelï¼Œå®ƒä¸»è¦çš„ä½œç”¨ï¼šå¯¹Viewä¸­DOMå…ƒç´ çš„ç›‘å¬å’Œå¯¹Modelä¸­çš„æ•°æ®è¿›è¡Œç»‘å®šï¼Œå½“Viewå˜åŒ–ä¼šå¼•èµ·Modalä¸­æ•°æ®çš„æ”¹åŠ¨ï¼ŒModelä¸­æ•°æ®çš„æ”¹åŠ¨ä¼šè§¦å‘Viewè§†å›¾é‡æ–°æ¸²æŸ“ï¼Œä»è€Œè¾¾åˆ°æ•°æ®åŒå‘ç»‘å®šçš„æ•ˆæœï¼Œè¯¥æ•ˆæœä¹Ÿæ˜¯Vueæœ€ä¸ºæ ¸å¿ƒçš„ç‰¹æ€§ã€‚")])]),e._v(" "),n("blockquote",[n("p",[e._v("å¸¸è§åº“å®ç°æ•°æ®åŒå‘ç»‘å®šçš„åšæ³•ï¼š")])]),e._v(" "),n("ul",[n("li",[e._v("å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆBackbone.jsï¼‰")]),e._v(" "),n("li",[e._v("è„å€¼æ£€æŸ¥ï¼ˆAngular.jsï¼‰")]),e._v(" "),n("li",[e._v("æ•°æ®åŠ«æŒï¼ˆVue.jsï¼‰")])]),e._v(" "),n("p",[e._v("é¢è¯•è€…åœ¨å›ç­”Vueçš„åŒå‘æ•°æ®ç»‘å®šåŸç†æ—¶ï¼Œå‡ ä¹æ‰€æœ‰äººéƒ½ä¼šè¯´ï¼šVueæ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œé€šè¿‡Object.defineProperty()æ¥åŠ«æŒå„ä¸ªå±æ€§çš„getter,setter, åœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„å›è°ƒå‡½æ•°ï¼Œä»è€Œå®ç°æ•°æ®åŒå‘ç»‘å®šã€‚ä½†å½“ç»§ç»­æ·±å…¥é—®é“ï¼š")]),e._v(" "),n("ul",[n("li",[e._v("å®ç°ä¸€ä¸ªMVVMé‡Œé¢éœ€è¦é‚£äº›æ ¸å¿ƒæ¨¡å—ï¼Ÿ")]),e._v(" "),n("li",[e._v("ä¸ºä»€ä¹ˆæ“ä½œDOMè¦åœ¨å†…å­˜ä¸Šè¿›è¡Œï¼Ÿ")]),e._v(" "),n("li",[e._v("å„ä¸ªæ ¸å¿ƒæ¨¡å—ä¹‹é—´çš„å…³ç³»æ˜¯æ€æ ·çš„ï¼Ÿ")]),e._v(" "),n("li",[e._v("Vueä¸­å¦‚ä½•å¯¹æ•°ç»„è¿›è¡Œæ•°æ®åŠ«æŒï¼Ÿ")]),e._v(" "),n("li",[e._v("ä½ è‡ªå·±æ‰‹åŠ¨å®Œæ•´çš„å®ç°è¿‡ä¸€ä¸ªMVVMå—ï¼Ÿ")]),e._v(" "),n("li",[e._v("...\n"),n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/9/16f8903d81d38466?w=223&h=223&f=jpeg&s=5750",alt:"å›¾ç‰‡alt",title:"why?"}})])]),e._v(" "),n("p",[e._v("æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä¸€æ­¥ä¸€æ­¥çš„å®ç°ä¸€å¥—å®Œæ•´çš„MVVMï¼Œå½“å†æ¬¡é—®é“MVVMç›¸å…³é—®é¢˜ï¼Œå®Œå…¨å¯ä»¥åœ¨é¢è¯•è¿‡ç¨‹ä¸­è„±é¢–è€Œå‡ºã€‚åœ¨å¼€å§‹ç¼–å†™MVVMä¹‹å‰ï¼Œæˆ‘ä»¬å¾ˆæœ‰å¿…è¦å¯¹æ ¸å¿ƒAPIå’Œå‘å¸ƒè®¢é˜…æ¨¡å¼ç†Ÿæ‚‰ä¸€ä¸‹ï¼š")]),e._v(" "),n("blockquote",[n("p",[e._v("ä»‹ç»ä¸€ä¸‹ Object.defineProperty çš„ä½¿ç”¨")])]),e._v(" "),n("p",[e._v("Object.defineProperty(obj, prop, desc) çš„ä½œç”¨å°±æ˜¯ç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å±æ€§")]),e._v(" "),n("ol",[n("li",[e._v("obj: éœ€è¦å®šä¹‰å±æ€§çš„å½“å‰å¯¹è±¡")]),e._v(" "),n("li",[e._v("prop: å½“å‰éœ€è¦å®šä¹‰çš„å±æ€§å")]),e._v(" "),n("li",[e._v("desc: å±æ€§æè¿°ç¬¦")])]),e._v(" "),n("p",[e._v("æ³¨æ„ï¼šä¸€èˆ¬é€šè¿‡ä¸ºå¯¹è±¡çš„å±æ€§èµ‹å€¼çš„æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„å±æ€§å¯ä»¥ä¿®æ”¹ä¹Ÿå¯ä»¥åˆ é™¤ï¼Œä½†æ˜¯é€šè¿‡Object.defineProperty()å®šä¹‰å±æ€§ï¼Œé€šè¿‡æè¿°ç¬¦çš„è®¾ç½®å¯ä»¥è¿›è¡Œæ›´ç²¾å‡†çš„æ§åˆ¶å¯¹è±¡å±æ€§ã€‚\n"),n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/9/16f89758b3f2f7c7?w=484&h=263&f=png&s=5980",alt:"å›¾ç‰‡alt",title:"å±æ€§æè¿°ç¬¦"}})]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("let obj = {}\nObject.defineProperty(obj, 'name', {\n    configurable: true,   // é»˜è®¤ä¸ºfalseï¼Œå¯é…ç½®çš„ã€åˆ é™¤ã€‘\n    writable: true,       // é»˜è®¤ä¸ºfalse, æ˜¯å¦å¯å†™ã€ä¿®æ”¹ã€‘\n    enumerable: true,     // é»˜è®¤ä¸ºfalse, æ˜¯å¦å¯æšä¸¾ã€for in éå†ã€‘\n    value: 'sfm',         // nameå±æ€§çš„å€¼\n    get() {\n        // è·å–obj.nameçš„å€¼æ—¶ä¼šè°ƒç”¨getå‡½æ•°\n    },\n    set(val) {\n        // valå°±æ˜¯é‡æ–°èµ‹å€¼çš„å€¼\n        // é‡æ–°ç»™obj.nameèµ‹å€¼æ—¶ä¼šè°ƒç”¨setå‡½æ•°\n    }\n})\n")])])]),n("p",[e._v("æ³¨æ„ï¼šå½“å‡ºç°get,setå‡½æ•°æ—¶ï¼Œä¸èƒ½åŒæ—¶å‡ºç°writable, enumerableå±æ€§ï¼Œå¦åˆ™ç³»ç»ŸæŠ¥é”™ã€‚å¹¶ä¸”è¯¥APIä¸æ”¯æŒIE8ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯Vueä¸å…¼å®¹IE8ä»¥ä¸‹çš„æµè§ˆå™¨ã€‚")]),e._v(" "),n("blockquote",[n("p",[e._v("DocumentFragment - æ–‡æ¡£ç¢ç‰‡")])]),e._v(" "),n("p",[e._v("DocumentFragment è¡¨ç¤ºæ–‡æ¡£ç‰‡æ®µï¼Œå®ƒä¸å±äº DOM æ ‘ï¼Œä½†æ˜¯å®ƒå¯ä»¥å­˜å‚¨ DOMï¼Œå¹¶ä¸”å¯ä»¥å°†æ‰€å­˜å‚¨çš„ DOM åŠ å…¥åˆ°æŒ‡å®šçš„ DOM èŠ‚ç‚¹ä¸­å»ã€‚é‚£ä¹ˆæœ‰äººè¦é—®äº†ï¼Œé‚£è¦å®ƒä½•ç”¨ï¼Œç›´æ¥æŠŠå…ƒç´ åŠ å…¥åˆ° DOM ä¸­ä¸å°±å¯ä»¥äº†å—ï¼Ÿç”¨å®ƒçš„åŸå› åœ¨äºï¼Œä½¿ç”¨å®ƒæ“ä½œ DOM è¦æ¯”ç›´æ¥æ“ä½œ DOM æ€§èƒ½è¦é«˜å¾ˆå¤šã€‚")]),e._v(" "),n("blockquote",[n("p",[e._v("ä»‹ç»ä¸€ä¸‹ å‘å¸ƒè®¢é˜…æ¨¡å¼")])]),e._v(" "),n("p",[e._v("å‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå³å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºä»–çš„å¯¹è±¡éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œè§£å†³äº†ä¸»ä½“å¯¹è±¡ä¸è§‚å¯Ÿè€…ä¹‹é—´åŠŸèƒ½çš„è€¦åˆã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå‘å¸ƒè®¢é˜…æ¨¡å¼çš„å°ä¾‹å­ï¼Œå®é™…ä¸Šå¯ä»¥ç†è§£ä¸ºé çš„å°±æ˜¯æ•°ç»„å…³ç³»ï¼Œè®¢é˜…å°±æ˜¯æ”¾å…¥å‡½æ•°ï¼Œå‘å¸ƒå°±æ˜¯è®©æ•°ç»„é‡Œçš„å‡½æ•°æ‰§è¡Œã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// å‘å¸ƒè®¢é˜…æ¨¡å¼  å…ˆæœ‰è®¢é˜…åæœ‰å‘å¸ƒ\nfunction Dep() {\n    this.subs = [];\n}\n// è®¢é˜…\nDep.prototype.addSub = function(sub) {\n    this.subs.push(sub);\n}\nDep.prototype.notify = function() {\n    this.subs.forEach(sub => sub.update());\n}\n// Watcherç±»ï¼Œé€šè¿‡è¿™ä¸ªç±»åˆ›å»ºçš„å®ä¾‹éƒ½æœ‰updateæ–¹æ³•\nfunction Watcher(fn) {\n    this.fn = fn;\n}\nWatcher.prototype.update = function() {\n    this.fn();\n}\nlet watcher1 = new Watcher(function() {\n    console.log(123);\n})\nlet watcher2 = new Watcher(function() {\n    console.log(456);\n})\nlet dep = new Dep();\ndep.addSub(watcher1); // å°†watcheræ”¾åˆ°äº†æ•°ç»„ä¸­\ndep.addSub(watcher2);\ndep.notify();\n\n// æ§åˆ¶å°è¾“å‡ºï¼š\n// 123 456\n")])])]),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/10/16f8b3976358f886?w=240&h=227&f=gif&s=15826",alt:"å›¾ç‰‡alt",title:"å­¦ä¸åŠ¨äº†"}})]),e._v(" "),n("h2",{attrs:{id:"å®ç°è‡ªå·±çš„-mvvm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°è‡ªå·±çš„-mvvm","aria-hidden":"true"}},[e._v("#")]),e._v(" å®ç°è‡ªå·±çš„ MVVM")]),e._v(" "),n("blockquote",[n("p",[e._v("è¦å®ç°mvvmçš„åŒå‘ç»‘å®šï¼Œå°±å¿…é¡»è¦å®ç°ä»¥ä¸‹å‡ ç‚¹ï¼š")])]),e._v(" "),n("ol",[n("li",[e._v("å®ç°ä¸€ä¸ªæ•°æ®åŠ«æŒ - Observerï¼Œèƒ½å¤Ÿå¯¹æ•°æ®å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¿›è¡Œç›‘å¬ï¼Œå¦‚æœ‰å˜åŠ¨å¯æ‹¿åˆ°æœ€æ–°å€¼å¹¶é€šçŸ¥è®¢é˜…è€…")]),e._v(" "),n("li",[e._v("å®ç°ä¸€ä¸ªæ¨¡æ¿ç¼–è¯‘ - Compilerï¼Œå¯¹æ¯ä¸ªå…ƒç´ èŠ‚ç‚¹çš„æŒ‡ä»¤è¿›è¡Œæ‰«æå’Œè§£æï¼Œæ ¹æ®æŒ‡ä»¤æ¨¡æ¿æ›¿æ¢æ•°æ®ï¼Œä»¥åŠç»‘å®šç›¸åº”çš„æ›´æ–°å‡½æ•°")]),e._v(" "),n("li",[e._v("å®ç°ä¸€ä¸ª - Watcherï¼Œä½œä¸ºè¿æ¥Observerå’ŒCompileçš„æ¡¥æ¢ï¼Œèƒ½å¤Ÿè®¢é˜…å¹¶æ”¶åˆ°æ¯ä¸ªå±æ€§å˜åŠ¨çš„é€šçŸ¥ï¼Œæ‰§è¡ŒæŒ‡ä»¤ç»‘å®šçš„ç›¸åº”å›è°ƒå‡½æ•°ï¼Œä»è€Œæ›´æ–°è§†å›¾")]),e._v(" "),n("li",[e._v("MVVM ä½œä¸ºå…¥å£å‡½æ•°ï¼Œæ•´åˆä»¥ä¸Šä¸‰è€…")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/10/16f8d664a54cb58a?w=730&h=390&f=png&s=9260",alt:"å›¾ç‰‡alt",title:"MVVMæµç¨‹"}})]),e._v(" "),n("h3",{attrs:{id:"æ•°æ®åŠ«æŒ-observer"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®åŠ«æŒ-observer","aria-hidden":"true"}},[e._v("#")]),e._v(" æ•°æ®åŠ«æŒ - Observer")]),e._v(" "),n("blockquote",[n("p",[e._v("Observer ç±»ä¸»è¦ç›®çš„å°±æ˜¯ç»™ data æ•°æ®å†…çš„æ‰€æœ‰å±‚çº§çš„æ•°æ®éƒ½è¿›è¡Œæ•°æ®åŠ«æŒï¼Œè®©å…¶å…·å¤‡ç›‘å¬å¯¹è±¡å±æ€§å˜åŒ–çš„èƒ½åŠ›")])]),e._v(" "),n("p",[e._v("ã€é‡ç‚¹ã€‘ï¼š")]),e._v(" "),n("ol",[n("li",[e._v("å½“å¯¹è±¡çš„å±æ€§å€¼ä¹Ÿæ˜¯å¯¹è±¡æ—¶ï¼Œä¹Ÿè¦å¯¹å…¶å€¼è¿›è¡ŒåŠ«æŒ --- é€’å½’")]),e._v(" "),n("li",[e._v("å½“å¯¹è±¡èµ‹å€¼ä¸æ—§å€¼ä¸€æ ·ï¼Œåˆ™ä¸éœ€è¦åç»­æ“ä½œ --- é˜²æ­¢é‡å¤æ¸²æŸ“")]),e._v(" "),n("li",[e._v("å½“æ¨¡æ¿æ¸²æŸ“è·å–å¯¹è±¡å±æ€§ä¼šè°ƒç”¨getæ·»åŠ targetï¼Œå¯¹è±¡å±æ€§æ”¹åŠ¨é€šçŸ¥è®¢é˜…è€…æ›´æ–° --- æ•°æ®å˜åŒ–ï¼Œè§†å›¾æ›´æ–°")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// æ•°æ®åŠ«æŒ\nclass Observer {\n    constructor(data) {\n        this.observer(data);\n    }\n    observer(data) {\n        if(data && typeof data == 'object') {\n            // åˆ¤æ–­dataæ•°æ®å­˜åœ¨ å¹¶ dataæ˜¯å¯¹è±¡  æ‰è§‚å¯Ÿ\n            for(let key in data) {\n                this.defineReactive(data, key, data[key]);\n            }\n        }\n    }\n    defineReactive(obj, key, value) {\n        let dep = new Dep();\n        this.observer(value); // å¦‚æœvalueè¿˜æ˜¯å¯¹è±¡ï¼Œè¿˜éœ€è¦è§‚å¯Ÿ\n        Object.defineProperty(obj, key, {\n            get() {\n                Dep.target && dep.addSub(Dep.target);\n                return value;\n            },\n            set:(newVal) => { // è®¾ç½®æ–°å€¼\n                if(newVal != value) { // æ–°å€¼å’Œå°±å€¼å¦‚æœä¸€è‡´å°±ä¸éœ€è¦æ›¿æ¢äº†\n                    this.observer(newVal); // å¦‚æœèµ‹å€¼çš„ä¹Ÿæ˜¯å¯¹è±¡çš„è¯  è¿˜éœ€è¦è§‚å¯Ÿ\n                    value = newVal;\n                    dep.notify(); // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…æ›´æ–°äº†\n                }\n            }\n        })\n    }\n}\n")])])]),n("p",[e._v("æ³¨æ„ï¼šè¯¥ç±»åªä¼šå¯¹å¯¹è±¡è¿›è¡Œæ•°æ®åŠ«æŒï¼Œå¹¶ä¸ä¼šå¯¹æ•°ç»„çš„ç›‘å¬ã€‚")]),e._v(" "),n("h3",{attrs:{id:"æ¨¡æ¿ç¼–è¯‘-compiler"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¨¡æ¿ç¼–è¯‘-compiler","aria-hidden":"true"}},[e._v("#")]),e._v(" æ¨¡æ¿ç¼–è¯‘ - Compiler")]),e._v(" "),n("blockquote",[n("p",[e._v("Compiler æ˜¯è§£ææ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è§†å›¾")])]),e._v(" "),n("p",[e._v("Compiler ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š")]),e._v(" "),n("ul",[n("li",[e._v("å°†å½“å‰æ ¹èŠ‚ç‚¹æ‰€æœ‰å­èŠ‚ç‚¹éå†æ”¾åˆ°å†…å­˜ä¸­")]),e._v(" "),n("li",[e._v("ç¼–è¯‘æ–‡æ¡£ç¢ç‰‡ï¼Œæ›¿æ¢æ¨¡æ¿ï¼ˆå…ƒç´ ã€æ–‡æœ¬ï¼‰èŠ‚ç‚¹ä¸­å±æ€§çš„æ•°æ®")]),e._v(" "),n("li",[e._v("å°†ç¼–è¯‘çš„å†…å®¹å›å†™åˆ°çœŸå®DOMä¸Š")])]),e._v(" "),n("p",[e._v("ã€é‡ç‚¹ã€‘ï¼š")]),e._v(" "),n("ol",[n("li",[e._v("å…ˆæŠŠçœŸå®çš„ dom ç§»å…¥åˆ°å†…å­˜ä¸­æ“ä½œ ---  æ–‡æ¡£ç¢ç‰‡")]),e._v(" "),n("li",[e._v("ç¼–è¯‘ å…ƒç´ èŠ‚ç‚¹ å’Œ æ–‡æœ¬èŠ‚ç‚¹")]),e._v(" "),n("li",[e._v("ç»™æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼å’Œå±æ€§æ·»åŠ è§‚å¯Ÿè€…")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// æ¨¡æ¿ç¼–è¯‘\nclass Compiler {\n    /**\n     * @param {*} el å…ƒç´  æ³¨æ„ï¼šelé€‰é¡¹ä¸­æœ‰å¯èƒ½æ˜¯â€˜#appâ€™å­—ç¬¦ä¸²ä¹Ÿæœ‰å¯èƒ½æ˜¯document.getElementById('#app')\n     * @param {*} vm å®ä¾‹\n     */\n    constructor(el, vm) {\n        // åˆ¤æ–­elå±æ€§  æ˜¯ä¸æ˜¯ä¸€ä¸ªå…ƒç´   å¦‚æœä¸æ˜¯å…ƒç´ å°±è·å–\n        this.el = this.isElementNode(el) ? el : document.querySelector(el);\n        // console.log(this.el);æ‹¿åˆ°å½“å‰çš„æ¨¡æ¿\n        this.vm = vm;\n        // æŠŠå½“å‰èŠ‚ç‚¹ä¸­çš„å…ƒç´ è·å–åˆ°  æ”¾åˆ°å†…å­˜ä¸­  é˜²æ­¢é¡µé¢é‡ç»˜\n        let fragment = this.node2fragment(this.el);\n        // console.log(fragment);å†…å­˜ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹\n\n        // 1. ç¼–è¯‘æ¨¡æ¿ ç”¨dataä¸­çš„æ•°æ®ç¼–è¯‘\n        this.compile(fragment);\n        // 2. æŠŠå†…å­˜ä¸­çš„å†…å®¹è¿›è¡Œæ›¿æ¢\n        this.el.appendChild(fragment);\n        // 3. å†æŠŠæ›¿æ¢åçš„å†…å®¹å›å†™åˆ°é¡µé¢ä¸­\n    }\n    /**\n     * åˆ¤æ–­æ˜¯å«æœ‰æŒ‡ä»¤\n     * @param {*} attrName å±æ€§å type v-modal\n     */\n    isDirective(attrName) {\n        return attrName.startsWith('v-'); // æ˜¯å¦å«æœ‰v-\n    }\n    /**\n     * ç¼–è¯‘å…ƒç´ èŠ‚ç‚¹\n     * @param {*} node å…ƒç´ èŠ‚ç‚¹\n     */\n    compileElement(node) {\n        // è·å–å½“å‰å…ƒç´ èŠ‚ç‚¹çš„å±æ€§ï¼›ã€ç±»æ•°ç»„ã€‘NamedNodeMap; ä¹Ÿå­˜åœ¨æ²¡æœ‰å±æ€§ï¼Œåˆ™NamedNodeMap{length: 0}\n        let attributes = node.attributes;\n        // Array.from()ã€[...xxx]ã€[].slice.call ç­‰éƒ½å¯ä»¥å°†ç±»æ•°ç»„è½¬åŒ–ä¸ºçœŸå®æ•°ç»„\n        [...attributes].forEach(attr => {\n            // attræ ¼å¼ï¼štype=\"text\"  v-modal=\"obj.name\"\n            let {name, value: expr} = attr;\n            // åˆ¤æ–­æ˜¯ä¸æ˜¯æŒ‡ä»¤\n            if(this.isDirective(name)) { // v-modal v-html v-bind\n                // console.log('element', node); å…ƒç´ \n                let [, directive] = name.split('-'); // è·å–æŒ‡ä»¤å\n                // éœ€è¦è°ƒç”¨ä¸åŒçš„æŒ‡ä»¤æ¥å¤„ç†\n                CompilerUtil[directive](node, expr, this.vm);\n            }\n        });\n    }\n    /**\n     * ç¼–è¯‘æ–‡æœ¬èŠ‚ç‚¹ åˆ¤æ–­å½“å‰æ–‡æœ¬èŠ‚ç‚¹ä¸­çš„å†…å®¹æ˜¯å¦å«æœ‰ {{}}\n     * @param {*} node æ–‡æœ¬èŠ‚ç‚¹\n     */\n    compileText(node) {\n        let content = node.textContent;\n        // console.log(content, â€˜å†…å®¹â€™); å…ƒç´ é‡Œçš„å†…å®¹\n        if(/\\{\\{(.+?)\\}\\}/.test(content)) { // é€šè¿‡æ­£åˆ™å»åŒ¹é…åªéœ€è¦å«æœ‰{{}}å¤§æ‹¬å·çš„ï¼Œç©ºçš„ä¸éœ€è¦ è·å–å¤§æ‹¬å·ä¸­é—´çš„å†…å®¹\n            // console.log(content, â€˜å†…å®¹â€™); åªåŒ…å«{{}} ä¸éœ€è¦ç©ºçš„ å’Œå…¶ä»–æ²¡æœ‰{{}}çš„å­å…ƒç´ \n            CompilerUtil['text'](node, content, this.vm);\n        }\n    }\n    /**\n     * ç¼–è¯‘å†…å­˜ä¸­çš„DOMèŠ‚ç‚¹\n     * @param {*} fragmentNode æ–‡æ¡£ç¢ç‰‡\n     */\n    compile(fragmentNode) {\n        // ä»æ–‡æ¡£ç¢ç‰‡ä¸­æ‹¿åˆ°å­èŠ‚ç‚¹  æ³¨æ„ï¼šchildNodesã€ä¹‹åŒ…å«ç¬¬ä¸€å±‚ï¼Œä¸åŒ…å«{{}}ç­‰ã€‘\n        let childNodes = fragmentNode.childNodes; // è·å–çš„æ˜¯ç±»æ•°ç»„NodeLis\n        [...childNodes].forEach(child => {\n            // æ˜¯å¦æ˜¯å…ƒç´ èŠ‚ç‚¹\n            if (this.isElementNode(child)) {\n                this.compileElement(child);\n                // å¦‚æœæ˜¯å…ƒç´ çš„è¯  éœ€è¦æŠŠè‡ªå·±ä¼ è¿›å»  å†å»éå†å­èŠ‚ç‚¹   é€’å½’\n                this.compile(child);\n            } else {\n                // æ–‡æœ¬èŠ‚ç‚¹\n                // console.log('text', child);\n                this.compileText(child);\n            }\n        });\n    }\n    /**\n     * å°†èŠ‚ç‚¹ä¸­çš„å…ƒç´ æ”¾åˆ°å†…å­˜ä¸­\n     * @param {*} node èŠ‚ç‚¹\n     */\n    node2fragment(node) {\n        // åˆ›å»ºä¸€ä¸ªç¨³å®šç¢ç‰‡ï¼›ç›®çš„æ˜¯ä¸ºäº†å°†è¿™ä¸ªèŠ‚ç‚¹ä¸­çš„æ¯ä¸ªå­©å­éƒ½å†™åˆ°è¿™ä¸ªæ–‡æ¡£ç¢ç‰‡ä¸­\n        let fragment = document.createDocumentFragment();\n        let firstChild; // è¿™ä¸ªèŠ‚ç‚¹ä¸­çš„ç¬¬ä¸€ä¸ªå­©å­\n        while (firstChild = node.firstChild) {\n            // appendChildå…·æœ‰ç§»åŠ¨æ€§ï¼Œæ¯ç§»åŠ¨ä¸€ä¸ªèŠ‚ç‚¹åˆ°å†…å­˜ä¸­ï¼Œé¡µé¢ä¸Šå°±ä¼šå°‘ä¸€ä¸ªèŠ‚ç‚¹\n            fragment.appendChild(firstChild);\n        }\n        return fragment;\n    }\n    /**\n     * åˆ¤æ–­æ˜¯ä¸æ˜¯å…ƒç´ \n     * @param {*} node å½“å‰è¿™ä¸ªå…ƒç´ çš„èŠ‚ç‚¹\n     */\n    isElementNode(node) {\n        return node.nodeType === 1;\n    }\n}\n// ç¼–è¯‘åŠŸèƒ½\nCompilerUtil = {\n    /**\n     * æ ¹æ®è¡¨è¾¾å¼å–åˆ°å¯¹åº”çš„æ•°æ®\n     * @param {*} vm \n     * @param {*} expr \n     */\n    getVal(vm, expr) {\n        return expr.split('.').reduce((data, current) => {\n            return data[current];\n        }, vm.$data);\n    },\n    setVal(vm, expr, value) {\n        expr.split('.').reduce((data, current, index, arr) => {\n          if (index === arr.length - 1) {\n            return data[current] = value;\n          }\n          return data[current]\n        }, vm.$data)\n    },\n    /**\n     * å¤„ç†v-modal\n     * @param {*} node å¯¹åº”çš„èŠ‚ç‚¹\n     * @param {*} expr è¡¨è¾¾å¼\n     * @param {*} vm å½“å‰å®ä¾‹\n     */\n    modal(node, expr, vm) {\n        // ç»™è¾“å…¥æ¡†èµ‹äºˆvalueå±æ€§ node.value = xxx\n        let fn = this.updater['modalUpdater'];\n        new Watcher(vm, expr, (newValue) => {//ç»™è¾“å…¥æ¡†åŠ ä¸€ä¸ªè§‚å¯Ÿè€… æ•°æ®æ›´æ–°ä¼šè§¦å‘æ­¤æ–¹æ³• ä¼šæ‹¿æ–°å€¼ç»™ è¾“å…¥æ¡†èµ‹å€¼\n          fn(node, newValue)\n        })\n        node.addEventListener('input', e => {\n          let value = e.target.value; // è·å–ç”¨æˆ·è¾“å…¥çš„å†…å®¹\n          this.setVal(vm, expr, value);\n        })\n        let value = this.getVal(vm, expr); // è¿”å›tmc\n        fn(node, value);\n    },\n    text(node, expr, vm) {\n        let fn = this.updater['textUpdater'];\n        let content = expr.replace(/\\{\\{(.+?)\\}\\}/g, (...args) => {\n            // ç»™è¡¨è¾¾å¼ æ¯ä¸ª{{}} åŠ ä¸Šè§‚å¯Ÿè€…\n            new Watcher(vm, args[1], (newValue) => {\n                fn(node, this.getContentValue(vm, expr)); // è¿”å›äº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²\n            })\n            return this.getVal(vm, args[1].trim());\n        });\n        fn(node, content);\n    },\n    updater: {\n        // æŠŠæ•°æ®æ’å…¥åˆ°èŠ‚ç‚¹ä¸­\n        modalUpdater(node, value) {\n            node.value = value;\n        },\n        // å¤„ç†æ–‡æœ¬èŠ‚ç‚¹\n        textUpdater(node, value) {\n            node.textContent = value;\n        }\n    }\n}\n")])])]),n("p",[e._v("Complier å…·å¤‡å°† HTML æ¨¡ç‰ˆè§£ææˆ Document Fragment çš„èƒ½åŠ›ï¼Œå¹¶ä¸”ä¼šåˆ›å»ºå“åº”çš„ Watcherï¼Œè®©è§†å›¾ä¸­ç»‘å®šçš„æ•°æ®äº§ç”Ÿå˜åŒ–ã€‚")]),e._v(" "),n("h3",{attrs:{id:"å‘å¸ƒè®¢é˜…-watcher"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‘å¸ƒè®¢é˜…-watcher","aria-hidden":"true"}},[e._v("#")]),e._v(" å‘å¸ƒè®¢é˜… - Watcher")]),e._v(" "),n("blockquote",[n("p",[e._v("Watcher è®¢é˜…è€…ä½œä¸º Observer å’Œ Compile ä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯:")])]),e._v(" "),n("ol",[n("li",[e._v("åœ¨è‡ªèº«å®ä¾‹åŒ–æ—¶å¾€å±æ€§è®¢é˜…å™¨(dep)é‡Œé¢æ·»åŠ è‡ªå·±")]),e._v(" "),n("li",[e._v("è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ªupdate()æ–¹æ³•")]),e._v(" "),n("li",[e._v("å¾…å±æ€§å˜åŠ¨dep.notice()é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„update()æ–¹æ³•ï¼Œå¹¶è§¦å‘Compileä¸­ç»‘å®šçš„å›è°ƒï¼Œåˆ™åŠŸæˆèº«é€€ã€‚")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// å‘å¸ƒè®¢é˜…\nfunction Dep() { \n    this.subs = []\n}\nDep.prototype.addSub = function(sub) {\n    this.subs.push(sub)\n}\nDep.prototype.notify = function() {\n    this.subs.forEach(sub => sub.update())\n}\n/**\n  * watcher\n  * @param {*} vm å½“å‰å®ä¾‹\n  * @param {*} exp è¡¨è¾¾å¼\n  * @param {*} fn ç›‘å¬å‡½æ•°\n  */\nfunction Watcher(vm, exp, fn) { \n    this.fn = fn;\n    this.vm = vm;\n    this.exp = exp; // æ·»åŠ åˆ°è®¢çº¦ä¸­\n    Dep.target = this;\n    let val = vm;\n    let arr = exp.split('.');\n    arr.forEach(function (k) { \n        val = val[k];\n    })\n    Dep.target = null; // ä¿è¯watcherä¸ä¼šé‡å¤æ·»åŠ \n}\nWatcher.prototype.update = function() {\n    let val = this.vm;\n    let arr = this.exp.split('.');\n    arr.forEach(function (k) { \n        val = val[k];\n    })\n    this.fn(val)\n}\n")])])]),n("p",[e._v("Dep å’Œ Watcher æ˜¯ç®€å•çš„è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°ï¼ŒDep å³è®¢é˜…è€…ï¼Œå®ƒä¼šç®¡ç†æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œå¹¶ä¸”æœ‰ç»™è§‚å¯Ÿè€…å‘é€æ¶ˆæ¯çš„èƒ½åŠ›ã€‚Watcher å³è§‚å¯Ÿè€…ï¼Œå½“æ¥æ”¶åˆ°è®¢é˜…è€…çš„æ¶ˆæ¯åï¼Œè§‚å¯Ÿè€…ä¼šåšå‡ºè‡ªå·±çš„æ›´æ–°æ“ä½œã€‚")]),e._v(" "),n("h3",{attrs:{id:"æ•´åˆ-mvvm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ•´åˆ-mvvm","aria-hidden":"true"}},[e._v("#")]),e._v(" æ•´åˆ - MVVM")]),e._v(" "),n("p",[e._v("MVVMä½œä¸ºæ•°æ®ç»‘å®šçš„å…¥å£ï¼Œæ•´åˆObserverã€Compileå’ŒWatcherä¸‰è€…ï¼Œé€šè¿‡Observeræ¥ç›‘å¬è‡ªå·±çš„modelæ•°æ®å˜åŒ–ï¼Œé€šè¿‡Compileæ¥è§£æç¼–è¯‘æ¨¡æ¿æŒ‡ä»¤ï¼Œæœ€ç»ˆåˆ©ç”¨Watcheræ­èµ·Observerå’ŒCompileä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œè¾¾åˆ°æ•°æ®å˜åŒ– -> è§†å›¾æ›´æ–°ï¼›è§†å›¾äº¤äº’å˜åŒ–(input) -> æ•°æ®modelå˜æ›´çš„åŒå‘ç»‘å®šæ•ˆæœã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("class MVVM {\n    constructor(options) {\n        // å½“newè¯¥ç±»æ—¶ï¼Œå‚æ•°å°±ä¼šä¼ åˆ°æ„é€ å‡½æ•°ä¸­ optionså°±æ˜¯el  data computed ...\n        this.$el = options.el; // åˆ›å»ºä¸€ä¸ªå½“å‰å®ä¾‹$el\n        this.$data = options.data;\n        // åˆ¤æ–­æ ¹å…ƒç´ æ˜¯å¦å­˜åœ¨ <div id='app'></div> =>  ç¼–è¯‘æ¨¡æ¿\n        if (this.$el) {\n            // æŠŠdataé‡Œçš„æ•°æ® å…¨éƒ¨è½¬åŒ–æˆç”¨Object.definePropertyæ¥å®šä¹‰\n            new Observer(this.$data);\n            new Compiler(this.$el, this);\n        }\n    }\n}\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("æ³¨æ„ï¼šè¿™æ ·æœ‰ä¸ªé—®é¢˜? \nåœ¨å¼€å‘ä¸­æ˜¯èƒ½é€šè¿‡å®ä¾‹+å±æ€§ï¼ˆvm.aï¼‰æ¥è·å–æ•°æ®ï¼Œè€Œæˆ‘ä»¬å®ç°çš„MVVMè·å–æ•°æ®è¦é€šè¿‡myMvvm.$data.xxxæ¥è·å–åˆ°æ•°æ®ï¼Œä¸­é—´å¤šäº†ä¸€ä¸ª$dataï¼Œè¿™æ ·æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ ·å­ã€‚æ¥ä¸‹æ¥å®ç°è®©å®ä¾‹thisæ¥ä»£ç†$dataæ•°æ®ï¼Œå³å¯å®ç°myMvvm.xxxè·å–æ•°æ®å’ŒçœŸå®åœºæ™¯ä¸€æ ·çš„æ“ä½œã€‚\n")])])]),n("blockquote",[n("p",[e._v("æ•°æ®ä»£ç†")])]),e._v(" "),n("p",[e._v("åœ¨MVVMå®ä¾‹ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§ä»£ç†çš„æ–¹æ³•ï¼Œä½¿è®¿é—®myMvvmçš„å±æ€§ä»£ç†ä¸ºè®¿é—®myMvvm.$dataçš„å±æ€§ã€‚å…¶å®è¿˜æ˜¯åˆ©ç”¨äº†Object.defineProperty()æ–¹æ³•æ¥åŠ«æŒäº†myMvvmå®ä¾‹å¯¹è±¡çš„å±æ€§ã€‚æ·»åŠ çš„ä»£ç†æ–¹æ³•å¦‚ä¸‹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// this ä»£ç† $data\n  for (let key in data) {\n    Object.defineProperty(this, key, {\n      enumerable: true,\n      get() {\n        return this.$data[key]; // this.xxx == {}\n      },\n      set(newVal) {\n        this.$data[key] = newVal;\n      }\n    })\n  }\n")])])]),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/11/16f9367354115832?w=100&h=120&f=png&s=10286",alt:"å›¾ç‰‡alt",title:"ç»§ç»­å¹²"}})]),e._v(" "),n("h3",{attrs:{id:"æ‰©å±•-å®ç°computed"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ‰©å±•-å®ç°computed","aria-hidden":"true"}},[e._v("#")]),e._v(" æ‰©å±• - å®ç°computed")]),e._v(" "),n("blockquote",[n("p",[e._v("computed å…·æœ‰ç¼“å­˜åŠŸèƒ½ï¼Œå½“ä¾èµ–çš„å±æ€§å‘é€å˜åŒ–ï¼Œæ‰ä¼šæ›´æ–°è§†å›¾å˜åŒ–")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function initComputed() {\n    let vm = this; // å°†å½“å‰thisæŒ‚è½½åˆ°vmä¸Š\n    let computed = this.$options.computed;  // ä»optionsä¸Šæ‹¿åˆ°computedå±æ€§\n    // å¾—åˆ°çš„éƒ½æ˜¯å¯¹è±¡çš„keyå¯ä»¥é€šè¿‡Object.keysè½¬åŒ–ä¸ºæ•°ç»„\n    Object.keys(computed).forEach(key => {\n        Object.defineProperty(vm, key, { // æ˜ å°„åˆ°thiså®ä¾‹ä¸Š\n            // åˆ¤æ–­æ˜¯computedé‡Œçš„keyæ˜¯å¯¹è±¡è¿˜æ˜¯å‡½æ•°\n            // è‹¥æ˜¯å‡½æ•°ï¼Œåˆ™ç›´æ¥å°±è°ƒgetæ–¹æ³•\n            // è‹¥æ˜¯å¯¹è±¡ï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è°ƒä¸€ä¸‹getæ–¹æ³•\n            // å› ä¸ºcomputedåªæ ¹æ®ä¾èµ–çš„å±æ€§è¿›è¡Œè§¦å‘ï¼Œå½“è·å–ä¾èµ–å±æ€§æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨çš„å»è°ƒç”¨getæ–¹æ³•ï¼Œæ‰€ä»¥å°±ä¸è¦ç”¨Watcherå»ç›‘å¬å˜åŒ–äº†\n            get: typeof computed[key] === 'function' ? computed[key] : computed[key].get,\n            set() {}\n        });\n    });\n}\n")])])]),n("h2",{attrs:{id:"é¡¹ç›®gitåœ°å€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é¡¹ç›®gitåœ°å€","aria-hidden":"true"}},[e._v("#")]),e._v(" é¡¹ç›®gitåœ°å€")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("https://github.com/tangmengcheng/mvvm.git æ¬¢è¿å°ä¼™ä¼´ç‚¹èµã€è¯„è®ºåŠ å…³æ³¨å“¦ğŸ¤­ star~\n")])])]),n("h2",{attrs:{id:"ç›¸å…³é—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸å…³é—®é¢˜","aria-hidden":"true"}},[e._v("#")]),e._v(" ç›¸å…³é—®é¢˜")]),e._v(" "),n("ul",[n("li",[e._v("Objest.defineProperty() æœ‰é‚£äº›ç¼ºç‚¹ï¼Ÿ")]),e._v(" "),n("li",[e._v("å®ç°æ•°ç»„çš„ä¸€ä¸ªç›‘å¬ï¼Ÿ")]),e._v(" "),n("li",[e._v("Vue3 ä¸­æ˜¯å¦‚ä½•ç”¨ Proxy å®ç°çš„ï¼Ÿ")]),e._v(" "),n("li",[e._v("Vue2.x æºç ä¸­æ•°æ®åŒå‘ç»‘å®šå¤§è‡´çš„å®ç°æµç¨‹ï¼Ÿ")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/11/16f936b42ecbfa9a?w=500&h=500&f=png&s=69135",alt:"å›¾ç‰‡alt",title:"what?"}})]),e._v(" "),n("h2",{attrs:{id:"æ€»ç»“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“","aria-hidden":"true"}},[e._v("#")]),e._v(" æ€»ç»“")]),e._v(" "),n("p",[e._v("é€šè¿‡ä»¥ä¸Šæè¿°å’Œæ ¸å¿ƒä»£ç çš„æ¼”ç¤ºï¼Œç›¸ä¿¡å°ä¼™ä¼´ä»¬å¯¹MVVMæœ‰é‡æ–°çš„è®¤è¯†ï¼Œé¢è¯•ä¸­å¯¹é¢é¢è¯•å®˜çš„æé—®å¯ä»¥å¯¹ç­”å¦‚æµã€‚å¸Œæœ›åŒè¡Œçš„å°ä¼™ä¼´æ‰‹åŠ¨æ•²ä¸€éï¼Œå®ç°ä¸€ä¸ªè‡ªå·±MVVMï¼Œè¿™æ ·å¯¹å…¶åŸç†ç†è§£æ›´åŠ æ·±å…¥ã€‚")]),e._v(" "),n("p",[e._v("éšç€æ—¥ç›Šæœˆè–ªéœ€æ±‚çš„ä¸æ–­å¢åŠ ï¼ŒjQueryæ“ä½œDOMçš„æ—¶ä»£å·²ç»æ»¡è¶³ä¸äº†ä¼ä¸šé¡¹ç›®å¿«é€Ÿè¿­ä»£çš„è¿›åº¦äº†ã€‚ MVVM æ¨¡å¼å¯¹äºå‰ç«¯é¢†åŸŸæœ‰ç€é‡å¤§çš„æ„ä¹‰ï¼Œå…¶æ ¸å¿ƒåŸç†ï¼šå®æ—¶ä¿è¯Viewå±‚ä¸Modelå±‚çš„æ•°æ®åŒæ­¥,å®ç°äº†åŒå‘æ•°æ®ç»‘å®šã€‚å‡å°‘äº†é¢‘ç¹çš„DOMæ“ä½œï¼Œæé«˜äº†é¡µé¢æ¸²æŸ“çš„æ€§èƒ½ï¼Œä¹Ÿè®©å¼€å‘è€…æŠŠæ›´å¤šçš„æ—¶é—´æ”¾åˆ°æ•°æ®çš„å¤„ç†ä»¥åŠä¸šåŠ¡åŠŸèƒ½çš„å¼€å‘ä¸Šã€‚\n"),n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/1/9/16f8630237583f32?w=780&h=519&f=jpeg&s=91038",alt:"å›¾ç‰‡alt",title:"åŠ æ²¹"}})]),e._v(" "),n("h2",{attrs:{id:"æœ€å"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ€å","aria-hidden":"true"}},[e._v("#")]),e._v(" æœ€å")]),e._v(" "),n("p",[e._v("å¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©å¾—è¯ï¼Œç»™æœ¬æ–‡ç‚¹ä¸ªèµâ¤ï¸â¤ï¸â¤ï¸")]),e._v(" "),n("p",[e._v("æ¬¢è¿å¤§å®¶åŠ å…¥ï¼Œä¸€èµ·å­¦ä¹ å‰ç«¯ï¼Œå…±åŒè¿›æ­¥ï¼\n"),n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/2/22/1706c4e36caf93fb?w=4500&h=3000&f=jpeg&s=1026670",alt:"cmd-markdown-logo"}}),e._v(" "),n("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2020/2/22/1706c4e8b11d0ce6?w=4500&h=3000&f=jpeg&s=968769",alt:"cmd-markdown-logo"}})])])}],!1,null,null,null);t.default=r.exports}}]);